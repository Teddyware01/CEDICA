{% extends "layout.html" %}

{% block title %} Listado de Pagos {% endblock %}

{% block content %}
    <h1>Listado de Pagos</h1>
    <div class="actions">
        <a href="{{ url_for('pagos.registrar_pago') }}" class="btn btn-add">Registrar Pago</a>
    </div>

    <form method="GET" action="{{ url_for('pagos.buscar_pagos') }}" class="mb-3 search-form">
        <div class="form-group">
            <label for="tipo_pago">Tipo de Pago:</label>
            <select id="tipo_pago" name="tipo_pago" class="form-control">
                <option value="">Todos</option>
                <option value="honorario">Honorarios</option>
                <option value="proveedor">Proveedor</option>
                <option value="gastos_varios">Gastos Varios</option>
            </select>
        </div>

        <div class="form-group">
            <label for="fecha_inicio">Fecha Inicio:</label>
            <input type="date" id="fecha_inicio" name="fecha_inicio" class="form-control">
        </div>

        <div class="form-group">
            <label for="fecha_fin">Fecha Fin:</label>
            <input type="date" id="fecha_fin" name="fecha_fin" class="form-control">
        </div>

        <div class="form-group">
            <label for="orden">Ordenar por Fecha:</label>
            <select id="orden" name="orden" class="form-control">
                <option value="asc">Ascendente</option>
                <option value="desc">Descendente</option>
            </select>
        </div>

        <div class="form-group full-width">
            <button type="submit" class="btn btn-primary">Buscar</button>
        </div>
    </form>

    <table class="table">
        <thead>
            <tr>
                <th>Beneficiario</th>
                <th>Monto</th>
                <th>Fecha de Pago</th>
                <th>Tipo de Pago</th>
                <th>Descripción</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for pago in pagos_realizado %}
            <tr>
                <td>{{ pago.beneficiario }}</td>
                <td>{{ pago.monto }}</td>
                <td>{{ pago.fecha_pago.strftime('%Y-%m-%d') }}</td>
                <td>{{ pago.tipo_pago.capitalize() }}</td>
                <td>{{ pago.descripcion }}</td>
                <td>
                    <form method="POST" action="{{ url_for('pagos.eliminar_pago', id=pago.id) }}" style="display:inline;">
                        <button type="submit" class="btn btn-delete" onclick="return confirm('¿Estás seguro de que deseas eliminar este pago?');">Eliminar</button>
                    </form>
                    <a href="{{ url_for('pagos.editar_pago', id=pago.id) }}" class="btn btn-edit">Editar</a>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}